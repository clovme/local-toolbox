import{X as c,U as s,W as d}from"./index-oCDbjsqw.js";const f=e=>{const a=new Map;e.forEach(t=>a.set(t.id,{...t,children:[]}));const r=[];e.forEach(t=>{const i=a.get(t.id);if(t.name==="all")r.splice(0,0,i);else if(t.name==="default")r.splice(1,0,i);else if(t.pid==="0")r.push(i);else{const n=a.get(t.pid);n&&n.children.push(i)}});const o=t=>{let i=t.articleCount;if(t.children&&t.children.length>0)for(const n of t.children)i+=o(n);return t.articleCount=i,i};return r.forEach(o),r};function y(e){return e?c.toDateString(e,"yyyy-MM-dd HH:mm:ss"):"-"}function L(){return c.toDateString(c.now(),"HH:mm:ss")}function T(e){const a=new Date(e),o=new Date().getTime()-a.getTime(),t=60*1e3,i=60*t,n=24*i,l=30*n,u=365*n;return o<t?"刚刚":o<i?Math.floor(o/t)+"分钟前":o<n?Math.floor(o/i)+"小时前":o<l?Math.floor(o/n)+"天前":o<u?Math.floor(o/l)+"月前":Math.floor(o/u)+"年前"}function A(){return s({url:"/readme",method:"get"})}function h(){return s({url:"/category",method:"get"})}function w(e){return s({url:"/category",method:"delete",data:{id:e.id}})}function S(e,a){return s({url:"/category",method:e?"post":"put",data:a})}function C(e){return s({url:"/upload/images",method:"post",headers:{"Content-Type":"multipart/form-data"},data:e})}function M(e,a){return s({url:"/article",method:e,data:a})}function g(e){return s({url:"/article/list",method:"get",params:e})}function m(e){return s({url:"/article",method:"get",params:e})}const E=d("article",{state:()=>({treeList:[],rootTreeList:[],articleInfo:{},categoryList:[],articleTags:{tags:[],articleList:[]}}),getters:{},actions:{fetchCategoryTreeList(e,a){const r=this;r.treeList=[],r.rootTreeList=[{id:"0",title:"根节点",name:"root",docSort:"updatedAt",articleCount:0,pid:"0",sort:0,status:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),children:[]}],h().then(o=>{if(r.categoryList=f(o.data),!e.cid||!e.type){const t=r.categoryList[0];a.push({name:"Article",query:{cid:t.id,type:t.name,sort:t.docSort}});return}r.categoryList.forEach(t=>{t.name==="all"||t.name==="default"||r.rootTreeList.push(t)}),r.categoryList.forEach(t=>{t.name!=="all"&&r.treeList.push(t)})})},fetchArticleList(e){const a=this;g(e).then(r=>{a.articleTags.tags=[],a.articleTags.articleList=r.data,r.data&&r.data.forEach(o=>{for(const t of o.tags.split("、"))a.articleTags.tags.includes(t)||a.articleTags.tags.push(t)})})},fetchArticleInfo(e){const a=this;m(e).then(r=>{document.title=[r.data.title,window.WebTitle].join(" - "),a.articleInfo=r.data,a.articleInfo.content=`> **文章摘要**：${r.data.summary}

${r.data.content}`})}}});export{m as a,C as b,w as d,y as f,A as g,L as n,M as o,S as p,T as t,E as u};
