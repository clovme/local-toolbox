import{u as T,f as g,t as y,o as E}from"./article-1IGa94eg.js";import{d as N,u as P,n as D,r as c,B as S,a as v,c as I,o as p,b as s,f as i,e as d,w as u,t as r,v as e,F as q,s as B,V as f,k as R,_ as O}from"./index-oCDbjsqw.js";import{m as $}from"./style-Cui97FQd.js";const j={class:"article-preview-box"},F={class:"article-preview-left-box"},L={class:"info-card"},M={class:"meta"},U={class:"meta tags"},H={class:"meta"},z={class:"meta"},G={class:"meta options"},J={class:"article-preview-content"},K={class:"title"},Q={class:"article-body"},W=N({__name:"ArticlePreview",setup(X){const _=P(),A=D(),t=T(),m=c(null),w=c(localStorage.getItem("APP_THEME")||"light"),b=c("default"),h=c(null);S(()=>{h.value=document.documentElement,m.value?.togglePreviewOnly(!0),m.value?.toggleCatalog(!0)});const k=a=>{f.modal.confirm({title:"删除提示",content:`删除《${a.title}》？`,escClosable:!0,status:"warning",maskClosable:!0,draggable:!1,destroyOnClose:!0}).then(o=>{o==="confirm"&&E("delete",a).then(n=>{f.modal.message({content:n.message,status:"success"}),A.push({name:"Article",query:{cid:a.categoryID,type:a.categoryName}})})})},x=a=>{f.clipboard.copy(a)&&f.modal.message({status:"success",content:"复制成功"})};return t.fetchArticleInfo(_.query),(a,o)=>{const n=v("router-link"),V=v("PageView");return p(),I("div",j,[s("aside",F,[s("div",L,[o[7]||(o[7]=s("h3",null,"文章信息",-1)),s("p",M,[o[3]||(o[3]=i("分类：",-1)),d(n,{class:"title-category",to:{name:"Article",query:{cid:e(t).articleInfo.categoryID,type:e(t).articleInfo.categoryName,sort:e(t).articleInfo.docSort}}},{default:u(()=>[i(r(e(t).articleInfo.categoryTitle),1)]),_:1},8,["to"])]),s("p",U,[o[4]||(o[4]=i("标签：",-1)),(p(!0),I(q,null,B(e(t).articleInfo.tags?.split("、"),(l,C)=>(p(),R(n,{to:{name:"Article",query:{cid:e(t).articleInfo.categoryID,type:e(t).articleInfo.categoryName,sort:e(t).articleInfo.docSort,kw:l}},key:C},{default:u(()=>[i(r(l),1)]),_:2},1032,["to"]))),128))]),s("p",H,"发布时间："+r(e(g)(e(t).articleInfo.createdAt))+"("+r(e(y)(e(t).articleInfo.createdAt))+")",1),s("p",z,"更新时间："+r(e(g)(e(t).articleInfo.updatedAt))+"("+r(e(y)(e(t).articleInfo.updatedAt))+")",1),o[8]||(o[8]=s("p",{class:"meta"},null,-1)),s("div",G,[d(n,{class:"options-box-edit",to:{name:"EditArticle",query:{id:e(t).articleInfo.id,cid:e(t).articleInfo.categoryID,type:e(t).articleInfo.categoryName,sort:e(t).articleInfo.docSort},params:{type:"edit"}}},{default:u(()=>[...o[5]||(o[5]=[i("编辑",-1)])]),_:1},8,["to"]),s("a",{onClick:o[0]||(o[0]=l=>k(e(t).articleInfo)),class:"options-box-delete",href:"javascript:void(0)"},"删除"),o[6]||(o[6]=s("div",{class:"flex1"},null,-1)),s("a",{onClick:o[1]||(o[1]=l=>x(e(t).articleInfo.content)),class:"options-box-delete",href:"javascript:void(0)"},"点击复制")])])]),s("main",J,[d(V,null,{default:u(()=>[s("h1",K,r(e(t).articleInfo.title),1),s("div",Q,[d(e($),{theme:w.value,ref_key:"editorRef",ref:m,modelValue:e(t).articleInfo.content,"onUpdate:modelValue":o[2]||(o[2]=l=>e(t).articleInfo.content=l),codeTheme:"github",catalogLayout:"flat",previewTheme:b.value,readOnly:!0,footers:[],toolbars:[]},null,8,["theme","modelValue","previewTheme"])])]),_:1})])])}}}),te=O(W,[["__scopeId","data-v-8e517553"]]);export{te as default};
