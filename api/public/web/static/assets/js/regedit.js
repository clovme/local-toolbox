eventListener.addLoadEventListener((()=>{eventListener.globalOnSwitchCaptcha(".verification-img","#floatingCaptcha"),eventListener.globalEmailValidateSend(".email-validate-code",".float-form","#floatingEmail");utils.validateForm(".float-form",(e=>{axios.post(e.action,new FormData(e)).then((e=>{utils.storage.remove("time"),utils.storage.remove("form"),""!==e.data.token?localStorage.setItem("TOKEN",e.data.token):localStorage.removeItem("TOKEN"),meMsg.alert.success("登录提示",e.message,(function(){window.location.reload()}))})).catch((t=>{for(let a in t.data){"hidden"!==e.elements[a].getAttribute("type")&&("email_code"===a&&(document.querySelector('input[name="email_code"]').value=""),utils.toast.createTippy(a,t.data[a]).show())}utils.storage.remove("time"),utils.storage.remove("form"),utils.onSwitchCaptcha()}))}),{username:e=>{if(!e)return"用户名不能为空";return/^[a-zA-Z0-9]{5,20}$/.test(e)?null:"请输入5-20位的字母、数字作为用户名"},email:e=>{if(!e)return"邮箱不能为空";return/^[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}$/.test(e)?null:"请输入有效的邮箱地址"},email_code:e=>e?null:"邮箱验证码不能为空",password:e=>{if(!e)return"密码不能为空";if(e.length<6||e.length>20)return"密码必须包含字母、数字和特殊字符，长度6-20";const t=/[A-Za-z]/.test(e),a=/\d/.test(e),o=/[^A-Za-z\d]/.test(e);return t&&a&&o?null:"密码必须包含字母、数字和特殊字符，长度6-20"},confirm_password:(e,t)=>{const a=t.querySelector('[name="password"]').value;return e?e!==a?"两次输入的密码不一致":null:"确认密码不能为空"},captcha:e=>e?null:"验证码不能为空"})}));